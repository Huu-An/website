<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <title>Laptop ASUS TUF Gaming F15 FX507CZ4-HN095W</title>
    <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="./styles/search-page.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>
    <link rel="stylesheet" href="./styles/view-product.css">
</head>

<body>
    <div class="container-fluid">
        <div id="header" class="row p-3">
            <div class="col-1 px-3 mx-auto mt-3">
                <a href="/"><img src="./images/white-logo.png" alt="logo" id="logo"
                        style="width: 60px; height: 60px;"></a>
            </div>
            <div id="search" class="col-7 d-flex-column justify-content-center">
                <div id="search-product" class="w-100">
                    <div class="mt-3 row rounded rounded-5" id="in-search">
                        <div class="input-group flex-nowrap" style="padding: 5px 10px;">
                            <span class="input-group-text" id="addon-wrapping"
                                style="background-color: white !important; border: none;"><i
                                    class="fa fa-search"></i></span>
                            <input type="text" class="form-control" style="border: none !important; width: 87%;"
                                placeholder="B·∫°n ƒëang t√¨m ki·∫øm s·∫£n ph·∫©m g√¨?" aria-label="search-input"
                                aria-describedby="addon-wrapping" id="input-search">
                            <button class="btn text-white rounded rounded-5" style="font-size: 15px;" type="button"
                                id="btn-search">T√¨m ki·∫øm</button>
                        </div>
                    </div>
                    <div class="row text-white text-center mt-1 mb-3">
                        <div class="dropdown col">
                            <span class="align-middle"><i class="fa fa-location-arrow" aria-hidden="true"></i> G·∫ßn
                            </span>
                            <div class="btn-group">
                                <button class="btn btn-sm dropdown-toggle text-white fw-bold" style="font-size: 16px;"
                                    type="button" id="locationSelect" data-bs-toggle="dropdown" aria-expanded="false">
                                    M·ªπ Th·∫°nh, Th·ªß ƒê·ª©c </button>
                                <ul class="dropdown-menu w-100">
                                    <li><a class="dropdown-item" href="#">B√¨nh D∆∞∆°ng</a></li>
                                    <li><a class="dropdown-item" href="#">B√¨nh D∆∞∆°ng</a></li>
                                    <li><a class="dropdown-item" href="#">B√¨nh D∆∞∆°ng</a></li>
                                </ul>
                            </div>
                        </div>
                        <div class="dropdown col">
                            <span class="align-middle"><i class="fa fa-calendar" aria-hidden="true"></i> Th·ªùi gian thu√™
                            </span>
                            <div class="btn-group">
                                <button class="btn btn-sm dropdown-toggle text-white fw-bold" style="font-size: 16px;"
                                    type="button" id="rentalDate" data-bs-toggle="dropdown" aria-expanded="false"> 26
                                    thg 10, 2024 - 2 thg 11, 2024 </button>
                                <ul class="dropdown-menu w-100">
                                    <li><a class="dropdown-item" href="#">B√¨nh D∆∞∆°ng</a></li>
                                    <li><a class="dropdown-item" href="#">B√¨nh D∆∞∆°ng</a></li>
                                    <li><a class="dropdown-item" href="#">B√¨nh D∆∞∆°ng</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-4">
                <div class="w-100 d-flex justify-content-center mt-3 pt-1">
                    <button class="btn text-white rounded rounded-5 px-3 pt-1 pb-1" id="btn-rent">Cho thu√™ s·∫£n
                        ph·∫©m</button>
                    <button class="btn">
                        <img src="./images/lang-vn.jpg" alt="" style="width: 25px; height: 25px;"
                            class="rounded rounded-circle">
                        <span class="text-white">VN</span>
                    </button>
                    <button class="btn" id="btn-user-info">
                        <i class="fa fa-user-circle text-white" aria-hidden="true" style="font-size: 1.3em;"></i>
                    </button>
                    <button class="btn" id="btn-cart">
                        <i class="fa fa-shopping-cart text-white" aria-hidden="true" style="font-size: 1.3em;"></i>
                    </button>
                    <button class="btn">
                        <i class="fa fa-bars text-white" aria-hidden="true" style="font-size: 1.3em;"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>
    <!-- MAIN CONTENT -->
    <div class="container mx-auto">
        <!-- 2 c·ªôt: ·∫¢nh s·∫£n ph·∫©m (tr√°i) + Booking card (ph·∫£i) -->
        <div class="product-section">
            <!-- ·∫¢nh s·∫£n ph·∫©m -->
            <div class="">
                <div class="product-image" style="padding: 100px 0px;">
                    <img class="w-100" src="./images/laptop_asus.png" alt="Laptop ASUS TUF Gaming F15 FX507CZ4-HN095W">
                </div>
                <div class="w-100 shadow mb-5 row" style="background: #d9d9d941;">
                    <div class="col pt-3 pb-3 px-5">
                        <div class="row">
                            <div class="col-2">
                                <div class="rounded rounded-circle"
                                    style="width: 50px; height: 50px; background: rgb(216, 215, 215);"></div>
                            </div>
                            <div class="col">
                                <h5>Thu·ªôc s·ªü h·ªØu c·ªßa</h5>
                                <a style="color: blue;">
                                    <h5>EPITOME</h5>
                                </a>
                            </div>
                        </div>
                        <div class="mt-1 mb-1">
                            <span class="icon">‚è±</span> Th∆∞∆°ng tr·∫£ l·ªùi trong v√†i ph√∫t
                        </div>
                        <div class="mt-1 mb-1"> <span class="icon">‚úÖ</span> T·ª∑ l·ªá ph√¢n h·ªëi 100% </div>
                        <div class="mt-1 mb-1"> <span class="icon">üìç</span> B√°n k√≠nh 5km </div>
                        <div class="mt-1 mb-1">
                            <span class="icon">üõ°</span> TER b·∫£o hi·ªÉm thi·ªát h·∫°i l√™n ƒë·∫øn 5.000.000 VNƒê cho m·ªói m·∫∑t h√†ng
                            <a href="#" class="read-more">ƒê·ªçc th√™m</a>
                        </div>
                        <button class="btn rounded rounded-3 pt-1 pb-1 px-5 mt-3"
                            style="border-style: solid; border-color: black;">Li√™n h·ªá</button>
                    </div>
                    <div class="col-5 p-0">
                        <div style="overflow: hidden;">
                            <img src="./images/map.png" alt="B·∫£n ƒë·ªì" style="width: 110%;">
                        </div>
                    </div>
                </div>
                <!-- M√¥ t·∫£ s·∫£n ph·∫©m -->
                <div>
                    <h5>TH√îNG TIN</h5>
                    <div class="mt-5">
                        <h6 style="color: gray;">Bao g·ªìm</h6>
                        <p style="font-weight: bold; color: black;">Laptop ASUS TUF Gaming F15 FX507ZC4-HN095W¬†</h6>
                    </div>
                    <div class="mt-5">
                        <h5 style="color: gray;">Cam k·∫øt</h5>
                        <p style="font-weight: bold; color: black;">TER b·∫£o hi·ªÉm thi·ªát h·∫°i l√™n ƒë·∫øn 5.000.000 VNƒê cho m·ªói
                            m·∫∑t h√†ng¬†<a href="" style="color: blue;">ƒê·ªçc th√™m</a></h6>
                    </div>
                    <div class="mt-5">
                        <h5 style="color: gray;">ƒêi·ªÅu ki·ªán h·ªßy b·ªè</h5>
                        <p style="font-weight: bold; color: black;">Trong tr∆∞·ªùng h·ª£p h·ªßy tr∆∞·ªõc 2 ng√†y so v·ªõi th·ªùi gian
                            thu√™, 100% s·ªë ti·ªÅn thu√™ s·∫Ω ƒë∆∞·ª£c ho√†n l·∫°i. N·∫øu h·ªßy tr∆∞·ªõc m·ªôt ng√†y so v·ªõi th·ªùi gian thu√™, 50%
                            s·ªë ti·ªÅn thu√™ s·∫Ω ƒë∆∞·ª£c ho√†n l·∫°i. N·∫øu b·∫°n h·ªßy v√†o c√πng ng√†y th·ªùi gian thu√™ b·∫Øt ƒë·∫ßu, s·∫Ω kh√¥ng
                            ƒë∆∞·ª£c ho√†n l·∫°i ti·ªÅn. <a href="" style="color: blue;">ƒê·ªçc th√™m</a></h6>
                    </div>
                </div>
            </div>
            <!-- Booking Card -->
            <div>
                <div class="product-name mt-3 mb-3 fw-bold" style="max-width: 380px;">
                    <h3>Laptop ASUS TUF Gaming F15 FX507CZ4-HN095W</h3>
                </div>
                <div class="booking-card">
                    <div class="price">550.000 ƒë/ng√†y</div>
                    <!-- Calendar gi·∫£ l·∫≠p -->
                    <div class="calendar">
                        <div class="calendar-header">Th√°ng 03, 2025</div>
                        <div class="calendar-grid">
                            <!-- H√†ng ti√™u ƒë·ªÅ (T2, T3, ...) -->
                            <div style="font-weight:bold;" class="day-title">T2</div>
                            <div style="font-weight:bold;" class="day-title">T3</div>
                            <div style="font-weight:bold;" class="day-title">T4</div>
                            <div style="font-weight:bold;" class="day-title">T5</div>
                            <div style="font-weight:bold;" class="day-title">T6</div>
                            <div style="font-weight:bold;" class="day-title">T7</div>
                            <div style="font-weight:bold;" class="day-title">CN</div>
                            <!-- Gi·∫£ l·∫≠p ng√†y (ch·ªâ demo) -->
                            <div style="cursor: pointer;" class="day-number">1</div>
                            <div style="cursor: pointer;" class="day-number">2</div>
                            <div style="cursor: pointer;" class="day-number">3</div>
                            <div style="cursor: pointer" class="day-number">4</div>
                            <div style="cursor: pointer;" class="day-number">5</div>
                            <div style="cursor: pointer;" class="day-number">6</div>
                            <div style="cursor: pointer;" class="day-number">7</div>
                            <div style="cursor: pointer;" class="day-number">8</div>
                            <div style="cursor: pointer;" class="day-number">9</div>
                            <div style="cursor: pointer;" class="day-number">10</div>
                            <div style="cursor: pointer;" class="day-number">11</div>
                            <div style="cursor: pointer" class="day-number">12</div>
                            <div style="cursor: pointer;" class="day-number">13</div>
                            <div style="cursor: pointer;" class="day-number">14</div>
                            <div style="cursor: pointer;" class="day-number">15</div>
                            <div style="cursor: pointer;" class="day-number">16</div>
                            <div style="cursor: pointer;" class="day-number">17</div>
                            <div style="cursor: pointer;" class="day-number">18</div>
                            <div style="cursor: pointer;" class="day-number">19</div>
                            <div style="cursor: pointer;" class="day-number">20</div>
                            <div style="cursor: pointer;" class="day-number">21</div>
                            <div style="cursor: pointer;" class="day-number">22</div>
                            <div style="cursor: pointer;" class="day-number">23</div>
                            <div style="cursor: pointer;" class="day-number">24</div>
                            <div style="cursor: pointer;" class="day-number">25</div>
                            <div style="cursor: pointer;" class="day-number">26</div>
                            <div style="cursor: pointer;" class="day-number">27</div>
                            <div style="cursor: pointer;" class="day-number">28</div>
                            <div style="cursor: pointer;" class="day-number">29</div>
                            <div style="cursor: pointer;" class="day-number">30</div>
                            <div style="cursor: pointer;" class="day-number">31</div>
                        </div>
                    </div>
                    <!-- Khu v·ª±c hi·ªÉn th·ªã k·∫øt qu·∫£ -->
                    <div id="summary" class="mt-3">
                        <p>S·ªë ng√†y ƒë√£ ch·ªçn: <span id="days-selected">0</span></p>
                        <p>T·ªïng ti·ªÅn: <span id="total-price">0</span> ƒë</p>
                    </div>
                    <!-- N√∫t Thu√™ ngay -->
                    <button class="btn" id="btn-rent-submit">Th√™m v√†o gi·ªè h√†ng</button>
                    <!-- C√°c m·ª©c gi√° 1 ng√†y, 3 ng√†y, 7 ng√†y -->
                    <div class="price-options">
                        <div class="option" > 1 ng√†y <span id="for_1_days_id">199.000 ƒë</span>
                        </div>
                        <div class="option" > 3 ng√†y <span id="for_3_days_id">550.000 ƒë</span>
                        </div>
                        <div class="option" > 7 ng√†y <span id="for_7_days_id">800.000 ƒë</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Khu v·ª±c b·∫£n ƒë·ªì v√† th√¥ng tin ch·ªß s·ªü h·ªØu
        <div class="map-owner-section">
            <div class="owner-card">
                <h4>Thu·ªôc s·ªü h·ªØu c·ªßa EPITOME</h4>
                <p>Th∆∞·ªùng tr·∫£ l·ªùi trong v√†i ph√∫t<br>
                    B√°n k√≠nh 5km<br>
                    TER b·∫£o hi·ªÉm thi·ªát h·∫°i l√™n ƒë·∫øn 5.000.000 VNƒê cho m·ªói m·∫∑t h√†ng¬†ƒê·ªçc th√™m
                </p>
            </div>
            <div class="map">
                Thay b·∫±ng iframe Google Maps n·∫øu mu·ªën b·∫£n ƒë·ªì ƒë·ªông -->
        <!-- <img src="./images/map.png" alt="B·∫£n ƒë·ªì">
            </div>
        </div> -->
        <!-- Kh·ªëi ‚ÄúThu·ªôc s·ªü h·ªØu c·ªßa EPITOME‚Äù -->
    </div>
    <footer id="footer" class="row text-white column-gap-3 w-100 mx-0" style="padding: 5% 12% 12% 5%;">
        <div class="col">
            <h5 class="mb-3">Gi·ªõi thi·ªáu TER</h5>
            <p class="mt-3 mb-3">Thu√™ Nhanh - thu√™ g√¨ c≈©ng c√≥. H·ªá th·ªëng cho thu√™ ƒë·ªì c√¥ng ngh·ªá ƒë·ªôc ƒë√°o h√†ng ƒë·∫ßu Vi·ªát Nam
            </p>
            <img src="./images/bct.png" class="mt-3" id="img-bct">
        </div>
        <div class="col">
            <h5 class="mb-3">Li√™n k·∫øt</h5>
            <div class="mt-3">
                <a href="/" style="text-decoration: none;" class="text-white">- Gi·ªõi thi·ªáu</a> </br>
                <a href="/" style="text-decoration: none;" class="text-white">- Li√™n h·ªá</a> </br>
                <a href="/" style="text-decoration: none;" class="text-white">- Tin t·ª©c</a> </br>
                <a href="/" style="text-decoration: none;" class="text-white">- H∆∞·ªõng d·∫´n s·ª≠ d·ª•ng</a> </br>
                <a href="/" style="text-decoration: none;" class="text-white">- ƒêi·ªÅu kho·∫£n s·ª≠ d·ª•ng</a> </br>
                <a href="/" style="text-decoration: none;" class="text-white">- Qui tr√¨nh thu√™</a> </br>
                <a href="/" style="text-decoration: none;" class="text-white">- ƒê·∫∑t c·ªçc</a> </br>
                <a href="/" style="text-decoration: none;" class="text-white">- L·ª£i √≠ch c·ªßa vi·ªác thu√™ v·ªõi mua</a> </br>
            </div>
        </div>
        <div class="col">
            <h5 class="mb-3">Th√¥ng tin li√™n h·ªá</h5>
            <div class="row">
                <table>
                    <tr>
                        <td class="px-3" style="font-size: 1.3em;"><i class="fa fa-map-marker" aria-hidden="true"></i>
                        </td>
                        <td>
                            <p class="mb-0">L√¥ E2a-7, ƒê∆∞·ªùng D1, ƒê. D1, Long Th·∫°nh M·ªπ, Th√†nh Ph·ªë Th·ªß ƒê·ª©c, H·ªì Ch√≠ Minh</p>
                        </td>
                    </tr>
                    <tr>
                        <td class="px-3" style="font-size: 1.3em;"><i class="fa fa-phone" aria-hidden="true"></i></td>
                        <td>
                            <a class="mb-0 text-white" href="tel:+84 0912345678"
                                style="text-decoration: none;">0912345678</a>
                        </td>
                    </tr>
                    <tr>
                        <td class="px-3" style="font-size: 1.3em;"><i class="fa fa-envelope" aria-hidden="true"></i>
                        </td>
                        <td>
                            <a class="mb-0 text-white" href="mailto:ter@gmail.com"
                                style="text-decoration: none;">ter@gmail.com</a>
                        </td>
                    </tr>
                </table>
            </div>
        </div>
        <div class="col">
            <h5 class="mb-3">Fanpage</h5>
            <div>
                <a href="" style="text-decoration: none;" class="text-white display-6"><i
                        class="fa fa-facebook-official" aria-hidden="true"></i></a>
            </div>
        </div>
    </footer>
    <script>
        // L·∫•y product id t·ª´ query parameter
        const urlParams = new URLSearchParams(window.location.search);
        const productId = urlParams.get('id');
        if (!productId) {
            console.error("Kh√¥ng c√≥ product id trong URL");
        } else {
            // G·ªçi API GET v·ªõi rent_id t∆∞∆°ng ·ª©ng
            fetch(`http://157.66.81.167:8000/rent/list?rent_id=${productId}&sort_by=created_at&order=desc`, {
                method: 'GET',
                headers: {
                    'accept': 'application/json'
                }
            })
                .then(response => response.json())
                .then(data => {
                    if (data.code === 200 && data.data) {
                        const product = data.data;
                        // C·∫≠p nh·∫≠t ·∫£nh s·∫£n ph·∫©m: gi·∫£ s·ª≠ d√πng ·∫£nh ƒë·∫ßu ti√™n
                        const productImageEl = document.querySelector('.product-image img');
                        // Gh√©p host cho ƒë∆∞·ªùng d·∫´n ·∫£nh
                        productImageEl.src = "http://157.66.81.167" + product.images[0];
                        productImageEl.alt = product.title;

                        // C·∫≠p nh·∫≠t ti√™u ƒë·ªÅ s·∫£n ph·∫©m
                        const productTitleEl = document.querySelector('.product-name h3');
                        if (productTitleEl) {
                            productTitleEl.textContent = product.title;
                        }

                        // C·∫≠p nh·∫≠t gi√° cho 1 ng√†y (t√¨m trong m·∫£ng rent_price ph·∫ßn c√≥ time = "for_1_days")
                        const priceForOne = product.rent_price.find(item => item.time === 'for_1_days');
                        const priceFor3 = product.rent_price.find(item => item.time === 'for_3_days');
                        const priceFor7 = product.rent_price.find(item => item.time === 'for_7_days');
                        const priceEl = document.querySelector('.booking-card .price');
                        if (priceForOne && priceEl) {
                            priceEl.textContent = priceForOne.price + " ƒë/ng√†y";
                        }
                        if (priceFor3 && priceEl) {
                            document.getElementById("for_1_days_id").textContent = priceForOne.price + " ƒë";
                        }
                        if (priceFor3 && priceEl) {
                            document.getElementById("for_3_days_id").textContent = priceFor3.price + " ƒë";
                        }
                        if (priceFor3 && priceEl) {
                            document.getElementById("for_7_days_id").textContent = priceFor7.price + " ƒë";
                        }
                        // N·∫øu b·∫°n c√≥ th√™m th√¥ng tin kh√°c nh∆∞ m√¥ t·∫£, ƒë·ªãa ch·ªâ, ... b·∫°n c√≥ th·ªÉ c·∫≠p nh·∫≠t t∆∞∆°ng t·ª±:
                        // V√≠ d·ª•: c·∫≠p nh·∫≠t m√¥ t·∫£ s·∫£n ph·∫©m v√†o ph·∫ßn "TH√îNG TIN"
                        const infoSection = document.querySelector('.product-section > div:nth-of-type(2)');
                        if (infoSection) {
                            // ·ªû ƒë√¢y b·∫°n c√≥ th·ªÉ t√¨m th·∫ª <p> n√†o c·∫ßn thay ƒë·ªïi ho·∫∑c t·∫°o m·ªõi n·ªôi dung
                            // V√≠ d·ª• ƒë∆°n gi·∫£n: th√™m m√¥ t·∫£ v√†o ƒë·∫ßu ph·∫ßn n√†y
                            const descriptionEl = document.createElement('p');
                            descriptionEl.style.fontWeight = 'bold';
                            descriptionEl.style.color = 'black';
                            descriptionEl.textContent = product.description;
                            // Ch√®n v√†o ƒë·∫ßu ph·∫ßn th√¥ng tin
                            infoSection.insertBefore(descriptionEl, infoSection.firstChild);
                        }
                    } else {
                        console.error("Kh√¥ng t√¨m th·∫•y s·∫£n ph·∫©m ho·∫∑c API tr·∫£ v·ªÅ l·ªói:", data.message);
                    }
                })
                .catch(error => {
                    console.error("L·ªói khi l·∫•y th√¥ng tin s·∫£n ph·∫©m:", error);
                });
        }

        // H√†m t√≠nh v√† c·∫≠p nh·∫≠t hi·ªÉn th·ªã
        function updateBookingInfo() {
            // ƒê·∫øm s·ªë ng√†y ƒë√£ ch·ªçn
            const for1Text = document.getElementById("for_1_days_id").innerText;
            const for3Text = document.getElementById("for_3_days_id").innerText;
            const for7Text = document.getElementById("for_7_days_id").innerText;
          
            const DAILY_PRICE = parseInt(for1Text.replace(/[^\d]/g, ''), 10);
            const PROMO_3_DAYS = parseInt(for3Text.replace(/[^\d]/g, ''), 10);
            const PROMO_7_DAYS = parseInt(for7Text.replace(/[^\d]/g, ''), 10);
         
            const selectedDaysCount = document.querySelectorAll(".calendar-grid div.selected").length;
            let totalPrice = 0;

            // √Åp d·ª•ng logic t√≠nh gi√°
            if (selectedDaysCount >= 7) {
                totalPrice = PROMO_7_DAYS;
            } else if (selectedDaysCount >= 3) {
                totalPrice = PROMO_3_DAYS;
            } else {
                // 0, 1, 2 ng√†y => t√≠nh theo gi√° l·∫ª
                totalPrice = selectedDaysCount * DAILY_PRICE;
            }

            // C·∫≠p nh·∫≠t giao di·ªán
            document.getElementById("days-selected").textContent = selectedDaysCount;
            document.getElementById("total-price").textContent = totalPrice.toLocaleString('vi-VN');
        }

        // G√°n s·ª± ki·ªán click cho c√°c √¥ ng√†y s·ªë (ch·ªâ click ƒë∆∞·ª£c cho c√°c ph·∫ßn t·ª≠ c√≥ class .day-number)
        document.querySelectorAll(".calendar-grid .day-number").forEach(dayEl => {
            dayEl.addEventListener("click", () => {
                dayEl.classList.toggle("selected"); // Th√™m/b·ªõt class 'selected'
                updateBookingInfo(); // T√≠nh to√°n l·∫°i t·ªïng s·ªë ng√†y v√† t·ªïng ti·ªÅn
            });
        });
       
    </script>
    <script>
        // H√†m l·∫•y token t·ª´ cookie (gi·∫£ s·ª≠ token l∆∞u d∆∞·ªõi d·∫°ng "access_token=...")
  function getTokenFromCookie() {
    const cookieString = document.cookie;
    const cookies = cookieString.split(';').map(c => c.trim());
    for (let c of cookies) {
      if (c.startsWith("access_token=")) {
        return c.substring("access_token=".length, c.length);
      }
    }
    return "";
  }

  // H√†m chuy·ªÉn ƒë·ªïi n·ªôi dung span th√†nh chu·ªói s·ªë (lo·∫°i b·ªè c√°c k√Ω t·ª± kh√¥ng ph·∫£i s·ªë)
  function getPriceString(id) {
    const el = document.getElementById(id);
    if (el) {
      return el.innerText.replace(/[^\d]/g, ''); // lo·∫°i b·ªè d·∫•u ch·∫•m, " ƒë", ‚Ä¶
    }
    return "";
  }

  // H√†m g·ªçi API t·∫°o gi·ªè h√†ng
  async function addToCart() {
    // L·∫•y th√¥ng tin s·∫£n ph·∫©m t·ª´ trang:
    // - Ti√™u ƒë·ªÅ s·∫£n ph·∫©m t·ª´ .product-name h3
    // - ·∫¢nh s·∫£n ph·∫©m t·ª´ .product-image img (ƒë·∫ßu ti√™n)
    // - S·ªë ng√†y ƒë√£ ch·ªçn t·ª´ id "days-selected"
    // - T·ªïng ti·ªÅn t·ª´ id "total-price" (lo·∫°i b·ªè k√Ω t·ª± kh√¥ng ph·∫£i s·ªë n·∫øu c·∫ßn)
    // - C√°c m·ª©c gi√° trong rent_price: l·∫•y t·ª´ c√°c span c√≥ id for_1_days_id, for_3_days_id, for_7_days_id

    const titleEl = document.querySelector('.product-name h3');
    const imageEl = document.querySelector('.product-image img');
    const daysEl = document.getElementById("days-selected");
    const totalPriceEl = document.getElementById("total-price");

    if (!titleEl || !imageEl || !daysEl || !totalPriceEl) {
      console.error("Kh√¥ng t√¨m th·∫•y m·ªôt s·ªë ph·∫ßn t·ª≠ c·∫ßn thi·∫øt tr√™n trang.");
      return;
    }

    const title = titleEl.textContent.trim();
    const image = imageEl.src.trim();
    const days = parseInt(daysEl.textContent.trim(), 10);
    // Lo·∫°i b·ªè k√Ω t·ª± kh√¥ng ph·∫£i s·ªë t·ª´ t·ªïng ti·ªÅn
    const totalPrice = parseInt(totalPriceEl.textContent.replace(/[^\d]/g, ''), 10);

    // L·∫•y gi√° cho c√°c m·ªëc: chuy·ªÉn v·ªÅ chu·ªói s·ªë
    const price1 = getPriceString("for_1_days_id");
    const price3 = getPriceString("for_3_days_id");
    const price7 = getPriceString("for_7_days_id");

    // X√¢y d·ª±ng payload theo m·∫´u API
    const payload = {
      title: title,
      image: image, // ƒê∆∞·ªùng d·∫´n ·∫£nh (c√≥ th·ªÉ c·∫ßn c·∫Øt b·ªè host n·∫øu API mong ƒë·ª£i ƒë∆∞·ªùng d·∫´n t∆∞∆°ng ƒë·ªëi)
      days: days,
      price: totalPrice,  // T·ªïng ti·ªÅn t√≠nh theo s·ªë ng√†y (theo logic t√≠nh gi√° tr√™n trang)
      is_paid: 1,         // Gi·∫£ s·ª≠ 1 n·∫øu ƒë√£ thanh to√°n
      rent_price: [
        {
          time: "for_1_days",
          price: price1
        },
        {
          time: "for_3_days",
          price: price3
        },
        {
          time: "for_7_days",
          price: price7
        }
      ]
    };

    // L·∫•y token t·ª´ cookie
    const token = getTokenFromCookie();
    if (!token) {
      alert("B·∫°n ch∆∞a ƒëƒÉng nh·∫≠p. Vui l√≤ng ƒëƒÉng nh·∫≠p tr∆∞·ªõc.");
      return;
    }

    try {
      const response = await fetch("http://157.66.81.167:8000/cart/create", {
        method: "POST",
        headers: {
          "accept": "application/json",
          "Content-Type": "application/json",
          "Authorization": "Bearer " + token
        },
        body: JSON.stringify(payload)
      });
      const data = await response.json();
      console.log("Response from cart API:", data);
      if (data.code === 200) {
        alert("Th√™m s·∫£n ph·∫©m v√†o gi·ªè h√†ng th√†nh c√¥ng!");
        // B·∫°n c√≥ th·ªÉ chuy·ªÉn h∆∞·ªõng ho·∫∑c c·∫≠p nh·∫≠t giao di·ªán gi·ªè h√†ng ·ªü ƒë√¢y
      } else {
        alert("Th√™m s·∫£n ph·∫©m v√†o gi·ªè h√†ng kh√¥ng th√†nh c√¥ng: " + (data.message || ""));
      }
    } catch (error) {
      console.error("L·ªói khi th√™m s·∫£n ph·∫©m v√†o gi·ªè:", error);
      alert("C√≥ l·ªói x·∫£y ra, vui l√≤ng th·ª≠ l·∫°i sau.");
    }
  }

  // G√°n s·ª± ki·ªán click cho n√∫t "Th√™m v√†o gi·ªè h√†ng"
  document.getElementById("btn-rent-submit").addEventListener("click", (e) => {
    addToCart();
  });
    </script>
</body>

</html>